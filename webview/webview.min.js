(function(){function e(){$axure.load=t,$axure.jsonbin=window.jsonbin=n,$axure.getAxureElement=a,$axure.getRepeaterData=i,$axure.gval=$axure.setGlobalVariable;var e=$(".ax-webview");$.each(e,(e,n)=>{if(!$(n).attr("axure_webview_inited")){var a=$(n).parents(".panel_state").parent(),r=a.children(".panel_state").find(".ax-html").find("textarea").val(),i=a.children(".panel_state").find(".ax-css").find("textarea").val(),o=a.children(".panel_state").find(".ax-javascript").find("textarea").val(),l=a.children(".panel_state").find(".ax-external").find("select option");s=l.length,$(n).children().hide();var u=function(){$("head").append("<style>"+i.replace(/ /gi,"")+"</style>"),$(n).append(r.replace(/ /gi,"")),$("body").append("<script>"+o.replace(/ /gi,"")+"</script>"),$(n).attr("axure_webview_inited","true")};if(s>0){var d=[],f=[];l.each((e,t)=>{var n=$(t).val(),a="selected"===$(t).attr("selected");a?d.push(n):f.push(n)}),t({urls:d,sync:!0,done:function(){c===s&&u()}}),t({urls:f,sync:!1,done:function(){c===s&&u()}})}else{if(c!==s)return;u()}window.AXURE_WEBVIEW={name:"axure webview",version:"2.5"}}})}function t(e){function t(e){var t=e.split("/").pop();t.indexOf("?")&&(t=t.split("?")[0]);var n=t.split(".");return n=n[n.length-1],n}function n(e,n){var a,r=t(e);"js"===r?(a=document.createElement("script"),a.setAttribute("type","text/javascript"),a.onload=a.onreadystatechange=n,a.setAttribute("src",e)):"css"===r&&(a=document.createElement("link"),a.setAttribute("type","text/css"),a.setAttribute("rel","text/stylesheet"),a.onload=a.onreadystatechange=n,a.setAttribute("href",e)),o.appendChild(a)}if(0!=e.urls.length){var a=e.urls,r=e.sync,i=e.done;if($.isArray(a)||(a=[a]),void 0===r&&(r=!0),!0===r){var l=a.length-1,u=function(e){var t=function(){this.onload=this.onreadystatechange=null,console.log(`【外部同步加载 ${c+1}/${s}】\n${$(this).attr("src")}`),c++,e!==l?u(e+1):"function"==typeof i&&i()};n(a[e],t)};u(0)}else for(var d=0,f=function(){d++,this.onload=this.onreadystatechange=null,d===a.length&&"function"==typeof i&&(console.log(`【外部异步加载 ${c+1}/${s}】\n${$(this).attr("src")}`),c++,i())},p=0;p<a.length;p++)n(a[p],f)}}function n(e){function t(e,t){$.ajax({url:o,data:JSON.stringify(e),type:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",success:t})}function n(e){$.ajax({url:o+"/latest",success:e})}function a(e,t){$.ajax({url:`${s}/b`,data:JSON.stringify({jsonbin:"created"}),type:"POST",beforeSend:function(e){e.setRequestHeader("secret-key",t)},contentType:"application/json; charset=utf-8",dataType:"json",success:t=>{e(t)}})}function r(){}function i(){return{host:s,id:e,url:o}}var s="https://api.jsonbin.io",o=`${s}/b/${e}`;if(e.length>30){var c=e;a(e=>{console.log(e)},c)}else{if(e){this.id=e;(function(e){this.id=e}).bind(this);return{create:a,update:t,read:n,del:r,info:i}}alert("需提供数据存储槽ID，请联系WaveF获取（QQ：298010937）")}}function a(e){return $axure(`@${e}`).$()}function r(e){var t=[];return $.each(e,(e,n)=>{var a={};for(var r in n)a[r]=n[r].text;t.push(a)}),t}function i(e,t){var n=a(e).attr("id"),i={data:null};return $axure(function(e){return"repeater"==e.type}).each(function(e,t){t==n&&(i=e)}),t?r(i.data):i.data}if(void 0===window.AXURE_WEBVIEW){var s,o=document.getElementsByTagName("head")[0]||document.documentElement,c=0;e()}})();