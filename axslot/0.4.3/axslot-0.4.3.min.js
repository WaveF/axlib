(function(){function e(){console.clear(),window.SLOT||(window.SLOT={version:"0.4.3",author:"WaveF",contact:"QQ:298010937"},$axure.internal(function(e){x=e}),m(["https://minicg.com/libs/notify.min.js","https://cdn.jsdelivr.net/npm/crypto-js@4.0.0/crypto-js.js","https://cdn.jsdelivr.net/npm/sweetalert2@10.3.5/dist/sweetalert2.all.min.js"],t,!1))}function t(){w();var e=$('div[class*="ax-slot-bid"]');e.each((e,t)=>{var r=$(t).parents(".panel_state").parent(),s=r.parents('div[data-label="AX-SLOT"]').get(0),l=$(t).siblings('div[class*="ax-slot-notify"]').find(".text").find("span").html(),c=$(t).siblings('div[class*="ax-slot-icon"]').find(".text").find("span").html(),d=$(t).siblings('div[class*="ax-slot-auto-load"]').find(".text").find("span").html(),p=$(t).siblings('div[class*="ax-slot-encrypt-key"]').find(".text").find("span").html(),y=$(t).siblings('div[class*="ax-slot-no-encrypt"]').find(".text").find("span").html(),h=$(t).find(".text").find("span").html();s.jsonbin=new u(h),$(s).css("overflow","hidden"),void 0===p&&(p=""),s.settings={bid:h,encryptKey:p,showNotify:o(l),showIcon:o(c),autoLoad:o(d),noEncrypt:o(y)},console.log("Settings:",s.settings),s.settings.showIcon||$(s).hide(),s.settings.autoLoad&&a(s),n(h)||Swal.fire({title:"Bin id is empty",text:"Do you want to create a new bin?",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&i(s)}),$(s).on("CmdChanged",f)})}function n(e){return!(!e||""==e||"Please enter jsonbin record id"==e)||(l("Please provide correct jsonbin record id","error",!0),l("axslot won't work for now","error",!0),!1)}function o(e){return"æ˜¯"==e||"1"==e||"true"==e||"True"==e||"TRUE"==e||"yes"==e||"Yes"==e||"YES"==e}function r(e){if(n(e.settings.bid)){var t=h(v(e.id));t.map(e=>{var t=$(`div[data-label="${e.watch}"]`);return t.find("span").length>0?e.value=t.find("span").html():t.find("input").length>0?e.value=t.find("input").val():t.find("textarea").length>0&&(e.value=t.find("textarea").val()),e}),console.log("Before Upload - get component values:",t),e.jsonbin.read(n=>{if(n.encrypted){if(""===e.settings.encryptKey)return void l("Data had been encrypted, please provide secret key.","error",e.settings.showNotify);try{n=d(n.encrypted,e.settings.encryptKey)}catch(t){console.log("Secret key does not match.",t.message),l("Secret key does not match.","warn",e.settings.showNotify)}console.log("Decrypt:",n)}console.log("Before Upload - Get data from cloud:",n),$.each(t,(e,t)=>{null==t.value&&n[e]&&n[e].value&&(t.value=n[e].value)}),console.log("Before Upload - Fill empty value with old data:",n),e.settings.noEncrypt||""===e.settings.encryptKey||(t=c(t,e.settings.encryptKey),t={encrypted:t},console.log("Before Upload - Encrypt data:",t)),e.jsonbin.update(t,t=>{l("Data saved to cloud.","success",e.settings.showNotify),console.log("After Upload - Final data:",t.data),p($(e).find('div[data-label="COMMANDS"]'))})})}}function a(e){n(e.settings.bid)&&e.jsonbin.read(t=>{if(t.encrypted){if(console.log("Read Directly - Before encrypt:",t),""===e.settings.encryptKey)return void l("Data had been encrypted, please provide secret key.","error",e.settings.showNotify);try{t=d(t.encrypted,e.settings.encryptKey)}catch(t){console.log("Secret does not match.",t.message),l("Secret does not match.","warn",e.settings.showNotify)}console.log("Read Directly - After Decrypt:",t)}l("Data loaded from cloud.","success",e.settings.showNotify),console.log("Read Directly - Final Data:",t),p($(e).find('div[data-label="COMMANDS"]')),$.each(t,(e,t)=>{var n=$(`div[data-label="${t.watch}"]`),o=n.attr("id");$axure(`#${o}`);n.find("span").length>0?(n.find(".text").html(`<p><span>${t.value}</span></p>`),n.find(".text").css({display:"block",visibility:"visible"})):n.find("input").length>0?n.find("input").val(t.value):n.find("textarea").length>0&&n.find("textarea").val(t.value)})})}function i(e){Swal.fire({title:"Create public bin",text:"Paste your secret-key below:",input:"text",footer:'Login to&nbsp;<a href="https://jsonbin.io" target="_blank">jsonbin.io</a>&nbsp;then click&nbsp;<a href="https://jsonbin.io/api-keys" target="_blank">here</a>&nbsp;to get secret-key, watch&nbsp;<a href="https://www.youtube.com/watch?v=Hnfe6ZVOGzQ" target="_blank">video tutorial</a>',inputAttributes:{autocapitalize:"off"},confirmButtonText:"Create",reverseButtons:!0,showCancelButton:!0,showLoaderOnConfirm:!0,preConfirm:e=>{},allowOutsideClick:()=>!Swal.isLoading()}).then(t=>{console.log(t),t.isConfirmed&&y(e=>{Swal.fire({title:"Your new bin-id is:",text:e.id})},t.value,!1),p($(e).find('div[data-label="COMMANDS"]'))})}function s(e){n(e.settings.bid)&&Swal.fire({title:"Delete bin ",html:`Current bin id:&nbsp;<span style="font-family:monospace;color:#F20;font-weight:bold;font-size:14px;">${e.settings.bid}</span>,<br>please provide your secret-key below:`,input:"text",footer:'Find your secret-key &nbsp;<a href="https://jsonbin.io/api-keys" target="_blank">here</a>&nbsp;',inputAttributes:{autocapitalize:"off"},showConfirmButton:!0,confirmButtonText:"Delete",reverseButtons:!0,showCancelButton:!0,showLoaderOnConfirm:!0,preConfirm:e=>{},allowOutsideClick:()=>!Swal.isLoading()}).then(t=>{t.isConfirmed&&e.jsonbin.del(e=>{Swal.fire({title:"Bin has been deleted.",text:e.id})},t.value),p($(e).find('div[data-label="COMMANDS"]'))})}function l(e,t,n){n&&$.notify(e,t)}function c(e,t){return CryptoJS.AES.encrypt(JSON.stringify(e),t).toString()}function d(e,t){var n=CryptoJS.AES.decrypt(e,t),o=n.toString(CryptoJS.enc.Utf8);return JSON.parse(o)}function p(e){$axure(`#${e.attr("id")}`).SetPanelState(1,{},!1)}function f(e,t){"update"===t.toLowerCase()?r(e.currentTarget):"read"==t.toLowerCase()?a(e.currentTarget):"create"==t.toLowerCase()?i(e.currentTarget):"delete"==t.toLowerCase()&&s(e.currentTarget)}function u(e){function t(e,t){$.ajax({url:s,data:JSON.stringify(e),type:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",success:t,error:function(e){console.log("AxSlot Error: Update",e),l("AxSlot: error, more detail in browser's console.","error",!0)}})}function n(e){$.ajax({url:s+"/latest",success:e,error:function(e){console.log("AxSlot Error: Read",e),l("AxSlot: error, more detail in browser's console.","error",!0)}})}function o(e,t,n){y(e,t,n)}function r(e,t){$.ajax({url:s,type:"DELETE",beforeSend:function(e){e.setRequestHeader("secret-key",t)},success:t=>{e(t)},error:function(e){console.log("AxSlot Error: Delete",e),l("AxSlot: error, more detail in browser's console.","error",!0)}})}function a(){return{host:i,id:e,url:s}}var i="https://api.jsonbin.io",s=`${i}/b/${e}`;if(console.log(`%cVisit ${i} generate your own record id for free.`,"background:#cbe7fe;"),e.length>30){var c=e;o(e=>{console.log(e)},c)}else{if(e){this.id=e;(function(e){this.id=e}).bind(this);return{create:o,update:t,read:n,del:r,info:a}}l("Need to provide jsonbin record id.",!0)}}function y(e,t,n){void 0===n&&(n=!1),$.ajax({url:"https://api.jsonbin.io/b",data:JSON.stringify({jsonbin:"created"}),type:"POST",beforeSend:function(e){e.setRequestHeader("secret-key",t),e.setRequestHeader("private",n)},contentType:"application/json; charset=utf-8",dataType:"json",success:t=>{e(t)},error:function(e){console.log("AxSlot Error: Create",e),l("AxSlot: error, more detail in browser's console.","error",!0)}})}function h(e,t){var n=[];return t=t||1,1===t?e=e:2==t&&(e=g(e)),$.each(e,(e,t)=>{var o={};for(var r in t)o[r]=t[r].text;n.push(o)}),n}function g(e){var t={},n=e[0];for(var o in n)t[o]=[],$(e).each((e,n)=>{t[o].push(n[o])});return t}function b(e){var t;return $axure(function(e){return"repeater"==e.type}).each(function(n,o){o==e&&(t=n)}),t}function v(e){var t=x.repeater.getAllItemIds(e),n=b(e).dataProps;rows=[];for(var o=0,r=t.length;o<r;o++){for(var a={},i=0,s=n.length;i<s;i++){var l=n[i].toLowerCase(),c=t[o];"string"==typeof c&&-1!=c.indexOf("-")&&(c=x.repeater.getItemIdFromElementId(c));var d=x.repeater.getData({},e,t[o],l,"data");"object"==typeof d?(d=x.deepCopy(d),void 0===d.type&&(d.type="text"),a[l]=d):a[l]={type:"text",text:d}}rows.push(a)}return rows}function m(e,t,n){var o=document.getElementsByTagName("head")[0]||document.documentElement;if($.isArray(e)||(e=[e]),void 0===n&&(n=!0),n){var r=[],a=e.length-1,i=function(n){var s=e[n];r[n]=document.createElement("script"),r[n].setAttribute("type","text/javascript"),r[n].onload=r[n].onreadystatechange=function(){this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),n!==a?i(n+1):"function"==typeof t&&t()},r[n].setAttribute("src",s),o.appendChild(r[n])};i(0)}else{r=[];for(var s=0,l=0;l<e.length;l++){var c=e[l];r[l]=document.createElement("script"),r[l].setAttribute("type","text/javascript"),r[l].onload=r[l].onreadystatechange=function(){s++,this.onload=this.onreadystatechange=null,s===e.length&&"function"==typeof t&&t()},r[l].setAttribute("src",c),o.appendChild(r[l])}}}function w(){$("head").append('<link href="https://cdn.jsdelivr.net/npm/@sweetalert2/themes@4.0.0/bootstrap-4/bootstrap-4.min.css" type="text/css" rel="stylesheet">'),$("head").append("<style>.swal2-title{font-size: 1.2rem;}.swal2-content{color:#aaa;font-size:.9em;}.swal2-styled.swal2-confirm,.swal2-styled.swal2-cancel{padding:.7rem 1.2rem;font-size:.85rem;}.swal2-footer{padding:1rem 1rem .5rem 1rem;}.swal2-actions{margin:1em auto 0;}.swal2-header{padding-top:.5em;}.swal2-footer{text-decoration:none;font-size:12px;color:#999;}.swal2-footer a{color:#06c;}<style>"),$("head").append("<style>.notifyjs-bootstrap-base{font-size:13px;}</style>"),$("head").append('<style>.ax-slot-icon-blink{animation:blink .02s infinite;animation-direction:alternate;}@keyframes blink{0%{opacity:0;}100%{opacity:100;}}div[data-label="ghost"]{pointer-events:none}</style>')}var x;e()})();